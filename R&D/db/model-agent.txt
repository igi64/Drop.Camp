

       +----------------+                   +----------------------+           +--------------------+
       |   tb_session   |                   | tb_oidc_self_issued  |           |  tb_oidc           |
       +----+-----------+                   +----+-----------------+           +----+---------------+
       | PK | sid       |                   | PK | id              |    FK     | PK | id            |
       +----+-----------+                   +----+-----------------+---------->+----+---------------+
       |    | session   |                   | FK | oidc_id         |           | UK | issuer        |
       |    | expires   |                   | UK | sub             |           +----+---------------+
       +----+-----------+                   +----+-----------------+           |    | provider      |
                                            |    | sub_jwk         |           |    | registration  |
                                            +----+-----------------+           +----+---------------+
                                                        ^                                 ^
                                                        |                                 |
                                                        |                                 |
                                                        |                                 |
                                                        |                                 | FK
                                                        | FK1                             |
                                                        |                                 |
                                         +--------------+---------------+                 |
                                         | tb_oidc_self_issued_verified |                 |
                                         +--------+---------------------+                 |
                                         | PK,FK1 | self_issued_id      |                 |
                                         | PK,FK2 | entity_id           |                 |
                                         +--------+-----+---------------+                 |
                                                        |                                 |
                                                        | FK2                             |
                                                        |                                 |
                                                        |    +----------------------------+
                                                        |    |
                                                        |    |
                                                        |    | 
       +------------------------+                       |    |    +--------------------------+
       |     tb_entity_info     |                       |    |    |      tb_folder_link      | FK2
       +-------+----------------+                       |    |    +-------------+------------+---------------+
       | PK    | id             |                       |    |    | PK          | id         | FK3           |
       +-------+----------------+                       |    |    +-------------+------------+---------+     |
       | UK,FK | entity_id      |                       |    |    | UK,FK1      | entity_id  |         |     |
       | UK    | provider       |        FK             |    |    | UK,FK2,KEY1 | parent_id  |         |     |
       +-------+----------------+------------------+    |    |    |    FK3,KEY2 | folder_id  |         |     |
       |       | display_name   |                  |    |    |    | UK          | name       |         |     |
       |       | given_name     |                  |    |    |    +-------------+------------+         |     |
       |       | middle_name    |                  |    |    |    |             | mtime      |         |     |
       |       | family_name    |                  |    |    |    +-------------+------------+         |     |
       +-------+----------------+                  |    |    |                  |                      |     |
                                                   |    |    |                  |                      |     |
                                                   |    |    |                  |                      |     |
                                                   |    |    |                  |                      |     |
                                                   |    |    |                  |                      |     |
                                                   |    |    |                  | FK1                  |     |
                                                   |    |    |                  |                      |     |
                                                   v    v    |                  v                      v     v
              +----------------------+         +-------------+----------------------+         +----------------------+
              |        tb_file       |         |            tb_entity               |         |       tb_folder      |
              +---------+------------+         +--------+---------------------------+         +--------+-------------+
              | PK      | id         |   FK    | PK     | id                        |    FK   | PK     | id          |
              +---------+------------+-------->+--------+---------------------------+<--------+--------+-------------+
              | FK,KEY  | owner_id   |         | FK     | oidc_id                   |         | FK,KEY | owner_id    |
              +---------+------------+         | UK1    | sub                       |         +--------+-------------+
              |         | mtime      |         | UK2    | email                     |         |        | mtime       |
              |         | locked     |         +--------+---------------------------+         |        | locked      |
              |         | hidden     |         |        | email_verified            |         |        | hidden      |
              +---------+------------+         +--------+---------------------------+         +--------+-------------+
                     ^     ^                                      ^                                       ^
                     |     |                                      |                                       |
                     |     |                                      |                                       |
                     |     |                                      |                                       |
                     |     |                                      |                                       |
                     |     |                                      |                                       |
                     |     |                                      | FK1                                   |
                     |     |                                      |                                       |
                     |     |                                      |                                       |
                     |     |                                      |                                       |
                     |     |                        +-------------+------------+                          |
                     |     |                        |       tb_file_link       |                          |
                     |     |                        +-------------+------------+                          |
                     |     |           FK3          | PK          | id         |           FK2            |
                     |     +------------------------+-------------+------------+--------------------------+
                     |                              | UK,FK1      | entity_id  |
                     | FK                           | UK,FK2,KEY1 | parent_id  |
                     |                              |    FK3,KEY2 | file_id    |
                     |                              | UK          | name       |
                     |                              +-------------+------------+
         +-----------+----------+                   |             | mtime      |
         |    tb_file_content   |                   +-------------+------------+
         +---------+------------+
         | PK      | id         |
         +---------+------------+
         | FK,KEY  | file_id    |
         +---------+------------+
         |         | content    |
         |         | mime       |
         |         | size       |
         |         | version    |
         |         | mtime      |
         +---------+------------+
